<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">

    <ui:composition template="templates/trainingmgmt-layout.xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

        <ui:param name="viewName" value="inqueryMgmt" />

        <ui:define name="content">

            <h3>問い合わせ管理</h3>
            <h:form>

                <h:commandLink style="float: right;" value="CSV エクスポート"  action="#{faqListBean.downloadFaqList()}" >
                    <f:param name="viewName" value="faqList"/>
                </h:commandLink>

                <h:dataTable value="#{faqListBean.faqs}" var="s"
                             styleClass="tablesorter sectionTable lines"
                             cellspacing="0" cellpadding="0">
                    <h:column>
                        <f:facet name="header">部局名</f:facet>
                        <h:outputText value="#{s.affiliation}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">部署名</f:facet>
                        <h:outputText value="#{s.department}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">職員番号</f:facet>
                        <h:outputText value="#{s.employeeNumber}" />
                    </h:column>
                    <h:column>
                        <f:facet name="header">職名</f:facet>
                        <h:outputText value="#{s.title}" />
                    </h:column>  
                    <h:column>
                        <f:facet name="header">氏名</f:facet>
                        <h:outputText value="#{s.displayName}" />
                    </h:column>                     
                    <h:column>
                        <f:facet name="header">受講日時</f:facet>
                        <h:outputText value="#{s.recordedDate}">                
                            <f:convertDateTime pattern="yyyy/MM/dd" />
                        </h:outputText>
                    </h:column>
                    <h:column>
                        <f:facet name="header">得点</f:facet>
                        <h:outputText value="#{s.recordedScore}" />
                    </h:column>  
                    <h:column>
                        <f:facet name="header">受講状態</f:facet>
                        <h:outputText value="受講済み" rendered="#{s.status eq true}"/>
                        <h:outputText value="未受講" rendered="#{s.status ne true}"/>
                    </h:column>                     
                </h:dataTable>
            </h:form>
        </ui:define>

    </ui:composition>
</html>
